# 27. Click And Drag

![á„‘á…³á„…á…µá„‡á…²](https://user-images.githubusercontent.com/87363422/156443286-61d8d736-b828-4d93-961a-92cbea0db2a7.png)

```
ðŸ’¡ ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­ í›„ ë“œëž˜ê·¸í•˜ë©´ ì´ë¯¸ì§€ê°€ ì¢Œìš°ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¬ë¼ì´ë“œí•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³´ìž!
```

## ë¡œì§

1. ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ì— ì œí•œì„ ê±¸ê¸°ìœ„í•œ ë³€ìˆ˜(`isDown`) ì„ ì–¸
2. ìœ„ì˜ ë³€ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ì—¬ëŸ¬ ë§ˆìš°ìŠ¤ì´ë²¤íŠ¸ ì¤‘ì—ì„œ ë§ˆìš°ìŠ¤ê°€ ëˆŒë ¤ìžˆëŠ” ì¤‘ì—ë§Œ mousemove í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì • (`mousedown`, `mouseleave`, `mouseup`, `mousemove`)
3. ë§ˆìš°ìŠ¤ê°€ ëˆŒë¦° ìˆœê°„ ëˆŒë¦° ê³³ì˜ xì¢Œí‘œì™€ ì–¼ë§ˆë‚˜ ìŠ¤í¬ë¡¤ ë¼ìžˆëŠ”ì§€ ê³„ì‚° (`e.pageX`, `offsetLeft`, `scrollLeft`)
4. ë§ˆìš°ìŠ¤ë¥¼ ë“œëž˜ê·¸í•˜ë©´ ì²˜ìŒ ëˆŒë¦° ê³³ì˜ xì¢Œí‘œì—ì„œ ì–¼ë§ˆë‚˜ ì´ë™í•˜ëŠ”ì§€ ê³„ì‚° í›„ ê·¸ ë§Œí¼ ì´ë¯¸ì§€ë¥¼ ìŠ¤í¬ë¡¤

---

## ì½”ë”© ê³¼ì •

### **1. ë³€ìˆ˜ ì„ ì–¸**

```jsx
const slider = document.querySelector(".items");
let isDown = false;
```

`isDown`ì€ íŠ¹ì • ì´ë²¤íŠ¸ ë°œìƒ ì¤‘ì—ë§Œ ì›í•˜ëŠ” í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ë„ë¡ ì œì–´í•˜ê¸°ìœ„í•œ ë³€ìˆ˜ì´ë‹¤.

### **2. ë§ˆìš°ìŠ¤ì´ë²¤íŠ¸ ì„¤ì •**

```jsx
slider.addEventListener("mousedown", () => {
  isDown = true;
  slider.classList.add("active");
});
slider.addEventListener("mouseleave", () => {
  isDown = false;
  slider.classList.remove("active");
});
slider.addEventListener("mouseup", () => {
  isDown = false;
  slider.classList.remove("active");
});
slider.addEventListener("mousemove", () => {
  if (!isDown) return;
});
```

```
ðŸ’¡ ì„¤ì •í•  ë§ˆìš°ìŠ¤ì´ë²¤íŠ¸ëŠ” mousedown, mouseleave, mouseup, mousemove 4ê°€ì§€ ì´ë‹¤.
```

ìš°ë¦¬ê°€ êµ¬í˜„í•˜ê³ ìž í•˜ëŠ” ê²ƒì€ ì´ë¯¸ì§€ë¥¼ "í´ë¦­"í•˜ê³  "ë“œëž˜ê·¸"í–ˆì„ ë•Œ ì´ë¯¸ì§€ê°€ ì›€ì§ì´ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ ë§ˆìš°ìŠ¤ê°€ ëˆŒë ¸ë‹¤ê°€ ë–¼ì§€ê±°ë‚˜ ì´ë¯¸ì§€ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì§€ ì•Šì•„ì•¼í•œë‹¤.

1. ë¨¼ì € ë³€ìˆ˜ `isDown`ê°’ì´ falseë©´ mousemove í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ í•œë‹¤.

```jsx
slider.addEventListener("mousemove", () => {
  if (!isDown) return;
  //í•¨ìˆ˜ê°€ ìž‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì½˜ì†”ì„ ì°ì–´ë³¸ë‹¤.
  console.log("im working!");
});
```

â‡’ ì²˜ìŒ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ë•Œ ê°’ì„ falseë¡œ í• ë‹¹í•´ë†“ì•˜ìœ¼ë¯€ë¡œ ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì‹¤í–‰x

2.  ë§ˆìš°ìŠ¤ê°€ ëˆŒë ¸ì„ ë•Œ(`mousedown`) `isDown`ê°’ì„ trueë¡œ í• ë‹¹,
    ì´ë¯¸ì§€ë¥¼ í´ë¦­í•œ ê²ƒì„ í‘œì‹œí•˜ê¸° ìœ„í•´ classë¥¼ ì¶”ê°€í•˜ì—¬ CSSíš¨ê³¼ ì ìš©

```jsx
slider.addEventListener('mousedown', () => {
  isDown = true
  slider.classList.add('active');
}
```

â‡’ ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì´ë©´ mousemove í•¨ìˆ˜ ì‹¤í–‰!

3. ë§ˆìš°ìŠ¤ê°€ ì›€ì§ì´ëŠ” ë„ì¤‘ì— ì´ë¯¸ì§€ë¥¼ ë²—ì–´ë‚  ë•Œ(`mouseleave`) `isDown`ê°’ì„ ë‹¤ì‹œ falseë¡œ í• ë‹¹
   ì´ë¯¸ì§€ ë²”ìœ„ë¥¼ ë²—ì–´ë‚œ ê²ƒì„ í‘œì‹œí•˜ê¸° ìœ„í•´ classë¥¼ ì œê±°í•˜ì—¬ CSSíš¨ê³¼ ì‚­ì œ

```jsx
slider.addEventListener("mouseleave", () => {
  isDown = false;
  slider.classList.remove("active");
});
```

â‡’ ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì—¬ë„ mousemove í•¨ìˆ˜ ì‹¤í–‰ x!

4. ë§ˆìš°ìŠ¤ê°€ ë–¼ì§€ë©´(`mouseup`) `isDown`ê°’ì„ ë‹¤ì‹œ falseë¡œ í• ë‹¹
   ì´ë¯¸ì§€ í´ë¦­ì´ ëë‚œ ê²ƒì„ í‘œì‹œí•˜ê¸° ìœ„í•´ classë¥¼ ì œê±°í•˜ì—¬ CSSíš¨ê³¼ ì‚­ì œ

```jsx
slider.addEventListener("mouseup", () => {
  isDown = false;
  slider.classList.remove("active");
});
```

â‡’ ë§ˆìš°ìŠ¤ë¥¼ ì›€ì§ì—¬ë„ mousemove í•¨ìˆ˜ ì‹¤í–‰ x!

### **3. ëˆ„ë¥¸ ê³³ì˜ ìœ„ì¹˜ ê³„ì‚°**

```jsx
slider.addEventListener("mousedown", (e) => {
  isDown = true;
  slider.classList.add("active");
  startX = e.pageX - slider.offsetLeft;
  scrollLeftt = slider.scrollLeft;
  //ì½˜ì†”ì„ ì°ì–´ì„œ í™•ì¸í•´ë³´ìž!
  console.table({ startX, scrollLeftt });
});
```

### e.pageX

```jsx
startX = e.pageX - slider.offsetLeft;
```

ë¸Œë¼ìš°ì € ìƒì—ì„œ í˜„ìž¬ ë§ˆìš°ìŠ¤ ì»¤ì„œì˜ ìœ„ì¹˜ë¥¼ êµ¬í•˜ê¸° ìœ„í•´ event objectì˜ ì†ì„±ì¸ pageX, pageYë¥¼ ì‚¬ìš©í•œë‹¤.

e.pageXëŠ” ë¬¸ì„œì˜ ì™¼ìª½ìƒë‹¨ì„ ê¸°ì¤€ìœ¼ë¡œ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì˜ Xì¢Œí‘œ ê°’,
e.pageYëŠ” ë¬¸ì„œì˜ ì™¼ìª½ìƒë‹¨ì„ ê¸°ì¤€ìœ¼ë¡œ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì˜ Yì¢Œí‘œ ê°’ì„ ë‚˜íƒ€ë‚¸ë‹¤.

> â‰ï¸ ë§Œì•½ ì´ë¯¸ì§€ì™€ íŽ˜ì´ì§€ ì‚¬ì´ì— ì—¬ë°±ì´ ìžˆë‹¤ë©´??

ìš°ë¦¬ê°€ êµ¬í•˜ê³ ìž í•˜ëŠ” ê²ƒì€ íŽ˜ì´ì§€ ë‚´ì—ì„œ ì–´ë””ë¥¼ í´ë¦­í–ˆëƒê°€ ì•„ë‹Œ
ì´ë¯¸ì§€ì˜ ë‚´ë¶€ì—ì„œ ì–´ë””ë¥¼ í´ë¦­í–ˆëŠ”ì§€ì´ë‹¤.
ë§Œì•½ ì´ë¯¸ì§€ ì‹œìž‘ì ì´ íŽ˜ì´ì§€ ì™¼ìª½ëì—ì„œ ë–¨ì–´ì ¸ ìžˆì„ ê²½ìš°
ex) ì´ë¯¸ì§€ widthê°’ì´ 100vw ì•„ëž˜; margin ì¡´ìž¬; ì´ë¯¸ì§€ ì˜†ì— ë‹¤ë¥¸ element ì¶”ê°€
e.pageX ë§Œìœ¼ë¡œëŠ” ì´ë¯¸ì§€ ë‚´ë¶€ì—ì„œì˜ ìœ„ì¹˜ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ë‹¤.

ë”°ë¼ì„œ íŽ˜ì´ì§€ì™€ ì´ë¯¸ì§€ ì‚¬ì´ì˜ ì—¬ë°±(`offsetLeft`)ì„ ë¹¼ì£¼ì–´ ì´ë¯¸ì§€ ë‚´ë¶€ì—ì„œì˜ ìœ„ì¹˜ë¥¼ ê³„ì‚°í•œë‹¤!

### scrollLeft

```jsx
scrollLeftt = slider.scrollLeft;
```

ìš”ì†Œê°€ ì»¨í…ì¸ ì˜ ì™¼ìª½ëì—ì„œë¶€í„° ì–¼ë§ˆë‚˜ ìŠ¤í¬ë¡¤ ë˜ìžˆëŠ”ì§€ë¥¼ ì•Œë ¤ì¤€ë‹¤.

startXì™€ scrollLefttë¥¼ ì„¤ì •í–ˆìœ¼ë‹ˆ ìŠ¤í¬ë¡¤í•´ì„œ consoleì— ì°ì–´ë³´ìž!

![á„á…©á†«á„‰á…©á†¯1](https://user-images.githubusercontent.com/87363422/156443248-51059c79-f204-4f58-9b0a-da038baf987c.png)

ìŠ¤í¬ë¡¤í•˜ê¸° ì „ 03ë²ˆ ì´ë¯¸ì§€ë¥¼ í´ë¦­í–ˆì„ ë•Œì˜ startX, scrollLeftt ê°’

![á„á…©á†«á„‰á…©á†¯2](https://user-images.githubusercontent.com/87363422/156443279-2ba85905-a4ea-46d7-880d-11a02155355f.png)

ìŠ¤í¬ë¡¤í•˜ì—¬ 20ë²ˆ ì´ë¯¸ì§€ë¥¼ í´ë¦­í–ˆì„ ë•Œì˜ startX, scrollLeftt ê°’

### **4. ì´ë¯¸ì§€ ìŠ¤í¬ë¡¤**

```jsx
slider.addEventListener("mousemove", (e) => {
  if (!isDown) return;
  //ë“œëž˜ê·¸ ì¤‘ í…ìŠ¤íŠ¸ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì„ ë°©ì§€!!
  e.preventDefault();
  const x = e.pageX - slider.offsetLeft;
  // ë³´ë‹¤ ë§¤ë„ëŸ½ê²Œ ì›€ì§ì´ë„ë¡ 3ì„ ê³±í•´ì¤Œ
  const walk = (x - startX) * 3;
  slider.scrollLeft = scrollLeftt - walk;
});
```

ë“œëž˜ê·¸ í–ˆì„ ë•Œì˜ ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì—ì„œ ì²˜ìŒ ë§ˆìš°ìŠ¤ë¥¼ ëˆ„ë¥¸ ê³³ì˜ ìœ„ì¹˜ë¥¼ ë¹¼ë©´ ë§ˆìš°ìŠ¤ê°€ ì–¼ë§Œí¼ ì´ë™í–ˆëŠ”ì§€ë¥¼ êµ¬í•  ìˆ˜ ìžˆë‹¤. (ì´ ë•Œ ê·¸ ê°’ì€ ìŒìˆ˜ì´ë‹¤.)

ì´ì œ ì´ë¯¸ì§€ì˜ scrollLeftê°’ì„ ë§ˆìš°ìŠ¤ê°€ ì´ë™í•œ ë§Œí¼ìœ¼ë¡œ ì„¤ì •í•˜ë©´
ë“œëž˜ê·¸í•œ ë§Œí¼ ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë“œ ëœë‹¤.

```
â— ì´ë•Œ ê·¸ëƒ¥ slider.scrollLeft = - walk ë¡œ ì„¤ì •í•  ê²½ìš° ì´ì „ì˜ ìŠ¤í¬ë¡¤ ê°’ì„ ê¸°ì–µí•˜ì§€ ëª»í•˜ê¸°ë•Œë¬¸ì— ë“œëž˜ê·¸ í•  ë•Œë§ˆë‹¤ ë§¤ë²ˆ ì»¨í…ì¸  ì‹œìž‘ì ë¶€í„° ìŠ¤í¬ë¡¤ì„ í•˜ê²Œëœë‹¤.
ë”°ë¼ì„œ mousedown ì´ë²¤íŠ¸ì—ì„œ ì„¤ì •í•œ ë³€ìˆ˜ì¸ scrollLefttë¥¼ ë”í•´ì¤˜ì„œ ì´ì „ ìŠ¤í¬ë¡¤ ê°’ì„ ë¶ˆëŸ¬ì˜¤ë©´ ëŠê¸°ì§€ì•Šê³  ë§¤ë„ëŸ½ê²Œ ë“œëž˜ê·¸ëœë‹¤!
```

---

## ìµœì¢… ì™„ì„± ì½”ë“œ

```jsx
const slider = document.querySelector(".items");
let isDown = false;
let startX;
let scrollLeftt;

slider.addEventListener("mousedown", (e) => {
  isDown = true;
  slider.classList.add("active");
  startX = e.pageX - slider.offsetLeft;
  scrollLeftt = slider.scrollLeft;
});
slider.addEventListener("mouseleave", () => {
  isDown = false;
  slider.classList.remove("active");
});
slider.addEventListener("mouseup", () => {
  isDown = false;
  slider.classList.remove("active");
});
slider.addEventListener("mousemove", (e) => {
  if (!isDown) return;
  e.preventDefault();
  const x = e.pageX - slider.offsetLeft;
  const walk = (x - startX) * 3;
  slider.scrollLeft = scrollLeftt - walk;
});
```
